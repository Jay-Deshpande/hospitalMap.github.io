<!DOCTYPE html>
<html>
<head>
  <title>QMetaTile Example</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    html, body, #map { width: 100%; height: 100%; margin: 0; background: #fff; }

        .legend {
            line-height: 24px;
            width: 180px;
            color: #333333;
            font-family: 'Open Sans', sans-serif;
            padding: 6px 8px;
            background: white;
            background: rgba(255,255,255,0.5);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }

        .legend b {
            font-size: 12px;
            line-height: 18px;
            margin: 0;
        }
  </style>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
  <div id='map'></div>
  <script type="text/javascript">
    var map = L.map('map', {
      maxZoom: 16,
      minZoom: 3
    }).setView([6.85, 79.9], 11);
    var grayscale = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png').addTo(map);
    var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}@2x');
    L.control.scale({position: 'bottomleft'}).addTo(map); // scale bar

    // Monochrome basemap for Colombo Region
    var colomboBase = L.tileLayer('assets/maps/columboBase/{z}/{x}/{y}.png', {
      attribution: 'Generated by Jay D | UW',
      detectRetina: true
    }).addTo(map);

    // Street focused basemap for easy route planning to hospitals
    var colomboStreets = L.tileLayer('assets/maps/columboStreets/{z}/{x}/{y}.png', {
      attribution: 'Generated by Jay D | UW',
      detectRetina: true
    });

    // Examination of green spaces in the Colombo region. When a user zooms
    // into an area they see a harsh constrast between black colored structures
    // such as roads and buildings and green colored spaces such as parks,
    // bicycle paths, pedestrian walkways, etc.
    var colomboGreen = L.tileLayer('assets/maps/columboGreen/{z}/{x}/{y}.png', {
      attribution: 'Generated by Jay D | UW',
      detectRetina: true
    });

    // Locations of major hospitals in the Colombo region
    var hospitals = L.tileLayer('assets/maps/hospitalLocs/{z}/{x}/{y}.png', {
      attribution: 'Generated by Jay D | UW',
      detectRetina: true
    });

    var baseLayers = {
      'Colombo Basemap': colomboBase,
      'Hospital Routes': colomboStreets,
      'Green Spaces': colomboGreen,
      'Satellite': satellite // helps a user better understand green spaces in area
    };

    var overlays = {
      'Hospitals': hospitals
    }

    L.control.layers(baseLayers, overlays, {
      collapsed: false,
      position: 'topright'
    }).addTo(map);

    var legend = L.control({position: 'bottomright'});
    // Function that runs when legend is added to map
    legend.onAdd = function () {
        // Create Div Element and Populate it with HTML
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += '<b>Select the Hospitals overlay to view locations of major hospitals in the Sri Lankan capital of Colombo. Select Green Spaces and zoom in to compare built structures (colored black) vs open spaces (colored green).</b><br />';
        // Return the Legend div containing the HTML content
        return div;
    };
    legend.addTo(map);
  </script>
</body>
</html>
